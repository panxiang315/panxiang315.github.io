<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
    
  
  <link href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="mysql,Navicat," />





  <link rel="alternate" href="/atom.xml" title="pan's record" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.0" />






<meta name="description" content="&amp;emsp;&amp;emsp;JDBC（Java DataBase Connectivity,java数据库连接）是一种用于执行SQL语句的Java API，可以为多种关系数据库提供统一访问，它由一组用Java语言编写的类和接口组成。JDBC提供了一种基准，据此可以构建更高级的工具和接口，使数据库开发人员能够编写数据库应用程序。&amp;emsp;&amp;emsp;简单的来说，JDBC就是连通JAVA和数据库之间的桥">
<meta name="keywords" content="mysql,Navicat">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库学习笔记">
<meta property="og:url" content="https://panxiang315.github.io/programme/Database/database-learning/index.html">
<meta property="og:site_name" content="pan&#39;s record">
<meta property="og:description" content="&amp;emsp;&amp;emsp;JDBC（Java DataBase Connectivity,java数据库连接）是一种用于执行SQL语句的Java API，可以为多种关系数据库提供统一访问，它由一组用Java语言编写的类和接口组成。JDBC提供了一种基准，据此可以构建更高级的工具和接口，使数据库开发人员能够编写数据库应用程序。&amp;emsp;&amp;emsp;简单的来说，JDBC就是连通JAVA和数据库之间的桥">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://panxiang315.github.io/images/programme/database/JOIN.jpg">
<meta property="og:updated_time" content="2018-07-18T10:03:30.328Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="数据库学习笔记">
<meta name="twitter:description" content="&amp;emsp;&amp;emsp;JDBC（Java DataBase Connectivity,java数据库连接）是一种用于执行SQL语句的Java API，可以为多种关系数据库提供统一访问，它由一组用Java语言编写的类和接口组成。JDBC提供了一种基准，据此可以构建更高级的工具和接口，使数据库开发人员能够编写数据库应用程序。&amp;emsp;&amp;emsp;简单的来说，JDBC就是连通JAVA和数据库之间的桥">
<meta name="twitter:image" content="https://panxiang315.github.io/images/programme/database/JOIN.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://panxiang315.github.io/programme/Database/database-learning/"/>





<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<script>
    (function(){
        if(''){
            if (prompt('请输入文章密码') !== ''){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>
<style>
    .pace .pace-progress {
        background: #1E92FB; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*上边框颜色*/
        border-left-color: #1E92FB;    /*左边框颜色*/
    }
</style>


  <title> 数据库学习笔记 | pan's record </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <!-- hexo-inject:begin --><!-- hexo-inject:end --><script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?41fc030db57d5570dd22f78997dc4a7e";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>
<!-- <a href="https://github.com/panxiang315/panxiang315.github.io"><img style="position: absolute; top: 0; right: 0; border: 0;
         " src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a> -->


    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta custom-logo">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">pan's record</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <h1 class="site-subtitle" itemprop="description">background of my life</h1>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://panxiang315.github.io/programme/Database/database-learning/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Pan Xiang">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="pan's record">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="pan's record" src="/images/avatar.jpg">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                数据库学习笔记
              
            
          </h2>
        

        <div class="post-meta">
        
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-20T09:20:07+08:00">
                2018-06-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/programme/" itemprop="url" rel="index">
                    <span itemprop="name">programme</span>
                  </a>
                </span>

                
                
                  >
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/programme/Database/" itemprop="url" rel="index">
                    <span itemprop="name">Database</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          


          
          

          

		  
            <div class="post-wordcount">
              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  6,895字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  27分
                </span>
              
            </div>
          

          




        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>&emsp;&emsp;JDBC（Java DataBase Connectivity,java数据库连接）是一种用于执行SQL语句的Java API，可以为多种关系数据库提供统一访问，它由一组用Java语言编写的类和接口组成。JDBC提供了一种基准，据此可以构建更高级的工具和接口，使数据库开发人员能够编写数据库应用程序。<br>&emsp;&emsp;简单的来说，JDBC就是连通JAVA和数据库之间的桥梁。</p>
<p><strong>使用软件</strong></p>
<blockquote>
<ul>
<li><strong>MYSQL</strong>：数据库</li>
<li><strong>Navicat</strong>：数据库管理软件</li>
</ul>
</blockquote>
<a id="more"></a>    
<hr>
<p>基本操作：<a href="http://www.cnblogs.com/mr-wid/archive/2013/05/09/3068229.html#d7" target="_blank" rel="noopener">21分钟 MySQL 入门教程</a><br>简易命令查询 ：<a href="http://www.cnblogs.com/shockerli/p/1000-plus-line-mysql-notes.html" target="_blank" rel="noopener">一千行MySQL学习笔记</a><br>学习视频课程(慕课网)：<a href="https://www.imooc.com/learn/421" target="_blank" rel="noopener">JDBC之“对岸的女孩走过来”</a></p>
<h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><p>&emsp;&emsp;数据库（Database）是按照数据结构来组织、存储和管理数据的仓库，每个数据库都有一个或多个不同的API用于创建，访问，管理，搜索和复制所保存的数据。我们也可以将数据存储在文件中，但是在文件中读写数据速度相对较慢。<br>&emsp;&emsp;所以，现在我们使用关系型数据库管理系统（RDBMS,Relational Database Management System）来存储和管理的大数据量。所谓的关系型数据库，是建立在关系模型基础上的数据库，借助于集合代数等数学概念和方法来处理数据库中的数据。<br>&emsp;&emsp;RDBMS的特点：</p>
<blockquote>
<p> 1.数据以表格的形式出现<br> 2.每行为各种记录名称<br> 3.每列为记录名称所对应的数据域<br> 4.许多的行和列组成一张表单<br> 5.若干的表单组成database</p>
</blockquote>
<p>&emsp;&emsp;RDBMS的术语：</p>
<blockquote>
<p> 数据库: 数据库是一些关联表的集合。<br> 数据表: 表是数据的矩阵。在一个数据库中的表看起来像一个简单的电子表格。<br> 列: 一列(数据元素) 包含了相同的数据, 例如邮政编码的数据。<br> 行：一行（=元组，或记录）是一组相关的数据，例如一条用户订阅的数据。<br> 冗余：存储两倍数据，冗余降低了性能，但提高了数据的安全性。<br> 主键：主键是唯一的。一个数据表中只能包含一个主键。你可以使用主键来查询数据。<br> 外键：外键用于关联两个表。<br> 复合键：复合键（组合键）将多个列作为一个索引键，一般用于复合索引。<br> 索引：使用索引可快速访问数据库表中的特定信息。索引是对数据库表中一列或多列的值进行排序的一种结构。类似于书籍的目录。<br> 参照完整性: 参照的完整性要求关系中不允许引用不存在的实体。与实体完整性是关系模型必须满足的完整性约束条件，目的是保证数据的一致性。</p>
</blockquote>
<p>&emsp;&emsp;MySQL就是一种RDBMS</p>
<h2 id="基础语句"><a href="#基础语句" class="headerlink" title="基础语句"></a>基础语句</h2><p>USE &lt;数据库名&gt;;选择要操作的Mysql数据库，使用该命令后所有Mysql命令都只针对该数据库。<br>SHOW DATABASES;列出 MySQL 数据库管理系统的数据库列表。<br>SHOW TABLES;显示指定数据库的所有表，使用该命令前需要使用 use 命令来选择要操作的数据库。<br>SHOW COLUMNS FROM &lt;数据表&gt;;显示数据表的属性，属性类型，主键信息 ，是否为 NULL，默认值等其他信息。<br>SHOW INDEX FROM &lt;数据表&gt;;显示数据表的详细索引信息，包括PRIMARY KEY（主键）。<br>SHOW TABLE STATUS LIKE [FROM db_name] [LIKE ‘pattern’] \G; 该命令将输出Mysql数据库管理系统的性能及统计信息。</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW <span class="keyword">TABLE</span> STATUS  <span class="comment">FROM RUNOOB</span>;<span class="comment">   #</span> 显示数据库<span class="comment"> RUNOOB</span> 中所有表的信息</span><br><span class="line">mysql&gt; SHOW <span class="keyword">TABLE</span> STATUS <span class="comment">from RUNOOB LIKE</span> <span class="comment">'runoob%'</span>;<span class="comment">     #</span> 表名以<span class="comment">runoob</span>开头的表的信息</span><br><span class="line">mysql&gt; SHOW <span class="keyword">TABLE</span> STATUS <span class="comment">from RUNOOB LIKE</span> <span class="comment">'runoob%'</span><span class="comment">\G</span>;<span class="comment">   #</span> 加上<span class="comment"> \G</span>，查询结果按列打印</span><br></pre></td></tr></table></figure>
<p>CREATE DATABASE &lt;数据库名&gt;;创建数据库<br>DROP database &lt;数据库名&gt;;删除数据库</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>&emsp;&emsp;MySQL支持多种类型，大致可以分为三类：数值、日期/时间和字符串(字符)类型。</p>
<p><strong>数值</strong></p>
<p>&emsp;&emsp;MySQL支持所有标准SQL数值数据类型。这些类型包括严格数值数据类型(INTEGER、SMALLINT、DECIMAL和NUMERIC)，以及近似数值数据类型(FLOAT、REAL和DOUBLE PRECISION)。</p>
<table>
<thead>
<tr>
<th style="text-align:center">类型</th>
<th style="text-align:center">大小</th>
<th style="text-align:center">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">TINYINT</td>
<td style="text-align:center">1 字节</td>
<td style="text-align:center">小整数值</td>
</tr>
<tr>
<td style="text-align:center">SMALLINT</td>
<td style="text-align:center">2 字节</td>
<td style="text-align:center">大整数值</td>
</tr>
<tr>
<td style="text-align:center">MEDIUMINT</td>
<td style="text-align:center">3 字节</td>
<td style="text-align:center">大整数值</td>
</tr>
<tr>
<td style="text-align:center">INT或INTEGER</td>
<td style="text-align:center">4 字节</td>
<td style="text-align:center">大整数值</td>
</tr>
<tr>
<td style="text-align:center">BIGINT</td>
<td style="text-align:center">8 字节</td>
<td style="text-align:center">极大整数值</td>
</tr>
<tr>
<td style="text-align:center">FLOAT</td>
<td style="text-align:center">4 字节</td>
<td style="text-align:center">单精度浮点数值</td>
</tr>
<tr>
<td style="text-align:center">DOUBLE</td>
<td style="text-align:center">8 字节</td>
<td style="text-align:center">双精度浮点数值</td>
</tr>
<tr>
<td style="text-align:center">DECIMAL</td>
<td style="text-align:center">对DECIMAL(M,D)   ，如果M&gt;D，为M+2否则为D+2</td>
<td style="text-align:center">小数值</td>
</tr>
</tbody>
</table>
<p><strong>日期和时间类型</strong></p>
<p>&emsp;&emsp;表示时间值的日期和时间类型为DATETIME、DATE、TIMESTAMP、TIME和YEAR。</p>
<table>
<thead>
<tr>
<th style="text-align:center">类型</th>
<th style="text-align:center">大小(字节)</th>
<th style="text-align:center">格式</th>
<th style="text-align:center">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">DATE</td>
<td style="text-align:center">3</td>
<td style="text-align:center">YYYY-MM-DD</td>
<td style="text-align:center">日期值</td>
</tr>
<tr>
<td style="text-align:center">TIME</td>
<td style="text-align:center">3</td>
<td style="text-align:center">HH:MM:SS</td>
<td style="text-align:center">时间值或持续时间</td>
</tr>
<tr>
<td style="text-align:center">YEAR</td>
<td style="text-align:center">1</td>
<td style="text-align:center">YYYY</td>
<td style="text-align:center">年份值</td>
</tr>
<tr>
<td style="text-align:center">DATETIME</td>
<td style="text-align:center">8</td>
<td style="text-align:center">YYYY-MM-DD HH:MM:SS</td>
<td style="text-align:center">混合日期和时间值</td>
</tr>
<tr>
<td style="text-align:center">TIMESTAMP</td>
<td style="text-align:center">4</td>
<td style="text-align:center">YYYYMMDD HHMMSS</td>
<td style="text-align:center">混合日期和时间值，时间戳</td>
</tr>
</tbody>
</table>
<p><strong>字符串类型</strong></p>
<p>&emsp;&emsp;字符串类型指CHAR、VARCHAR、BINARY、VARBINARY、BLOB、TEXT、ENUM和SET。该节描述了这些类型如何工作以及如何在查询中使用这些类型。</p>
<table>
<thead>
<tr>
<th style="text-align:center">类型</th>
<th style="text-align:center">大小</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CHAR</td>
<td style="text-align:center">0-255字节</td>
<td>定长字符串</td>
</tr>
<tr>
<td style="text-align:center">VARCHAR</td>
<td style="text-align:center">0-65535 字节</td>
<td>变长字符串</td>
</tr>
<tr>
<td style="text-align:center">TINYBLOB</td>
<td style="text-align:center">0-255字节</td>
<td>不超过 255 个字符的二进制字符串</td>
</tr>
<tr>
<td style="text-align:center">TINYTEXT</td>
<td style="text-align:center">0-255字节</td>
<td>短文本字符串</td>
</tr>
<tr>
<td style="text-align:center">BLOB</td>
<td style="text-align:center">0-65 535字节</td>
<td>二进制形式的长文本数据</td>
</tr>
<tr>
<td style="text-align:center">TEXT</td>
<td style="text-align:center">0-65 535字节</td>
<td>长文本数据</td>
</tr>
<tr>
<td style="text-align:center">MEDIUMBLOB</td>
<td style="text-align:center">0-16 777 215字节</td>
<td>二进制形式的中等长度文本数据</td>
</tr>
<tr>
<td style="text-align:center">MEDIUMTEXT</td>
<td style="text-align:center">0-16 777 215字节</td>
<td>中等长度文本数据</td>
</tr>
<tr>
<td style="text-align:center">LONGBLOB</td>
<td style="text-align:center">0-4 294 967 295字节</td>
<td>二进制形式的极大文本数据</td>
</tr>
<tr>
<td style="text-align:center">LONGTEXT</td>
<td style="text-align:center">0-4 294 967 295字节</td>
<td>极大文本数据</td>
</tr>
</tbody>
</table>
<h2 id="数据表操作"><a href="#数据表操作" class="headerlink" title="数据表操作"></a>数据表操作</h2><p><strong>创建数据表</strong></p>
<p>&emsp;&emsp;创建MySQL数据表需要以下信息：表名、表字段名、定义每个表字段</p>
<blockquote>
<p> CREATE TABLE table_name (column_name column_type);  //列名+列类型，多列用逗号隔开</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">`runoob_tbl`</span>(</span><br><span class="line">   <span class="string">`runoob_id`</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> AUTO_INCREMENT,  </span><br><span class="line">   // <span class="keyword">UNSIGNED</span>无符号类型，AUTO_INCREMENT定义列为自增的属性，一般用于主键，数值会自动加<span class="number">1</span>。</span><br><span class="line">   <span class="string">`runoob_title`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,  </span><br><span class="line">    // 如果你不想字段为 <span class="literal">NULL</span> 可以设置字段的属性为 <span class="keyword">NOT</span> <span class="literal">NULL</span>， 在操作数据库时如果输入该字段的数据为<span class="literal">NULL</span> ，就会报错。</span><br><span class="line">   <span class="string">`runoob_author`</span> <span class="built_in">VARCHAR</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   <span class="string">`submission_date`</span> <span class="built_in">DATE</span>,</span><br><span class="line">   PRIMARY <span class="keyword">KEY</span> ( <span class="string">`runoob_id`</span> )  //PRIMARY <span class="keyword">KEY</span>关键字用于定义列为主键。 您可以使用多列来定义主键，列间以逗号分隔。</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;  //ENGINE 设置存储引擎，CHARSET 设置编码。</span><br></pre></td></tr></table></figure>
<p><strong>删除数据表</strong></p>
<p>&emsp;&emsp;进行删除表操作时要非常小心，因为执行删除命令后所有数据都会消失。删除MySQL数据表的通用语法：<br>DROP TABLE &lt;table_name&gt; ;</p>
<p><strong>修改数据表</strong></p>
<p>&emsp;&emsp;当需要修改数据表名或者修改数据表字段时，就需要使用到MySQL ALTER命令。</p>
<p>ALTER TABLE testalter_tbl  DROP i;  //删除i列<br>ALTER TABLE testalter_tbl ADD i INT FIRST;  //新增i列<br>//需要指定新增字段的位置，可以使用MySQL提供的关键字 FIRST (设定位第一列)， AFTER 字段名（设定位于某个字段之后）。<br>ALTER TABLE testalter_tbl MODIFY c CHAR(10);  //修改字段类型<br>ALTER TABLE testalter_tbl CHANGE i j BIGINT;  //修改字段名称及类型<br>ALTER TABLE testalter_tbl MODIFY j BIGINT NOT NULL DEFAULT 100; //修改非空<br>ALTER TABLE testalter_tbl ALTER i SET DEFAULT 1000; //修改默认值<br>ALTER TABLE testalter_tbl ALTER i DROP DEFAULT;  //删除默认值<br>ALTER TABLE testalter_tbl ENGINE = MYISAM;  //修改数据表类型<br>ALTER TABLE testalter_tbl RENAME TO alter_tbl;  //修改表名</p>
<p><strong>临时表</strong><br>&emsp;&emsp;MySQL 临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql会自动删除表并释放所有空间。<br>CREATE TEMPORARY TABLE SalesSummary；  //创建临时表<br>DROP TABLE SalesSummary;  //删除临时表</p>
<p><strong>复制数据表</strong><br>SHOW CREATE TABLE runoob_tbl \G; //获得创建源表的语句，包括索引，主键等<br>CREATE TABLE <code>clone_tbl</code>（与源表相同）;  //生成新目的表列<br>INSERT INTO clone_tbl SELECT * FROM runoob_tbl;  //复制源表的数据到目的表</p>
<p>也可以缩写到下面两行<br>CREATE TABLE targetTable LIKE sourceTable;<br>INSERT INTO targetTable SELECT * FROM sourceTable;</p>
<h2 id="数据操作"><a href="#数据操作" class="headerlink" title="数据操作"></a>数据操作</h2><p><strong>查询数据</strong></p>
<p>&emsp;&emsp;数据库使用SQL SELECT语句来查询数据:<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT column_name,column_name   <span class="comment">//查询多列，用逗号隔开</span></span><br><span class="line"><span class="comment">//可以使用星号（*）来代替字段，SELECT语句会返回表的所有字段数据</span></span><br><span class="line">FROM table_name1,table_name2  <span class="comment">//在多个表中查询用逗号隔开</span></span><br><span class="line">[<span class="meta">WHERE Clause</span>]   <span class="comment">//设置查询条件</span></span><br><span class="line">[<span class="meta">LIMIT N</span>]  <span class="comment">// LIMIT 属性来设定返回的记录数。</span></span><br><span class="line">[<span class="meta"> OFFSET M</span>]   <span class="comment">// OFFSET指定SELECT语句开始查询的数据偏移量。默认情况下偏移量为0。</span></span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;WHERE 子句类似于程序语言中的 if 条件，根据 MySQL 表中的字段值来读取指定的数据。在 WHERE子句中指定任何条件,可以使用 AND 或者 OR 指定一个或多个条件。<br>&emsp;&emsp;WHERE 子句可以运用于 SQL 的SELECT、DELETE 或者 UPDATE 命令。</p>
<p>&emsp;&emsp;如果我们想再 MySQL 数据表中读取指定的数据，WHERE 子句是非常有用的。使用主键来作为 WHERE 子句的条件查询是非常快速的。如果给定的条件在表中没有任何匹配的记录，那么查询不会返回任何数据。</p>
<p>&emsp;&emsp;MySQL 的 WHERE 子句的字符串比较是不区分大小写的。 你可以使用 BINARY 关键字来设定 WHERE 子句的字符串比较是区分大小写的。</p>
<blockquote>
<p> SELECT * from runoob_tbl WHERE BINARY runoob_author=’RUNOOB.COM’;</p>
</blockquote>
<p><strong>插入数据</strong></p>
<p>&emsp;&emsp;数据表插入数据通用的 INSERT INTO SQL语法：</p>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO &lt;table<span class="number">_n</span>ame&gt; ( field<span class="number">1</span>, field<span class="number">2</span>,...fieldN )</span><br><span class="line">                       VALUES</span><br><span class="line">                       ( <span class="keyword">value</span><span class="number">1</span>a, <span class="keyword">value</span><span class="number">2</span>a,...valueNa ),</span><br><span class="line">                       ( <span class="keyword">value</span><span class="number">1</span>b, <span class="keyword">value</span><span class="number">2</span>b,...valueNb );</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;如果数据是字符型，必须使用单引号或者双引号，如：’value’。</p>
<p><strong>修改数据</strong></p>
<p>&emsp;&emsp;修改或更新 MySQL 中的数据，可以使用 SQL UPDATE 命令来操作。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//可以同时更新一个或多个字段</span><br><span class="line"><span class="keyword">UPDATE</span> table_name <span class="keyword">SET</span> field1=<span class="keyword">new</span>-value1, field2=<span class="keyword">new</span>-value2</span><br><span class="line">[<span class="keyword">WHERE</span> Clause]  //可以在 <span class="keyword">WHERE</span> 子句中指定任何条件</span><br><span class="line"><span class="keyword">UPDATE</span> runoob_tbl <span class="keyword">SET</span> runoob_title=<span class="string">'学习 C++'</span> <span class="keyword">WHERE</span> runoob_id=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p><strong>删除数据</strong></p>
<p>&emsp;&emsp;DELETE FROM 命令来删除 MySQL 数据表中的记录。如果没有指定 WHERE 子句，MySQL 表中的所有记录将被删除。<br>ELETE FROM table_name [WHERE Clause]</p>
<p><strong>模糊查询</strong></p>
<p>&emsp;&emsp;在查询语句中，WHERE 子句中可以使用等号 = 来设定获取数据的条件，如 “runoob_author = ‘RUNOOB.COM’”。但是有时候我们需要获取 runoob_author 字段含有 “COM” 字符的所有记录，这时我们就需要在 WHERE 子句中使用 SQL LIKE 子句。<br>&emsp;&emsp;SQL LIKE 子句中使用百分号 %字符来表示任意字符，类似于UNIX或正则表达式中的星号 *。如果没有使用百分号 %, LIKE 子句与等号 = 的效果是一样的。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> field1, field2,...fieldN </span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line">//可以使用<span class="keyword">LIKE</span>子句代替等号 =,通常与 % 一同使用，类似于一个元字符的搜索。</span><br><span class="line"><span class="keyword">WHERE</span> field1 <span class="keyword">LIKE</span> <span class="string">'%com'</span> [<span class="keyword">AND</span> [<span class="keyword">OR</span>]] filed2 = <span class="string">'somevalue'</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;模糊查询也可以用在 DELETE 或 UPDATE 命令中,使用 WHERE…LIKE 子句来指定条件。</p>
<h2 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h2><p><strong>组合</strong></p>
<p>&emsp;&emsp;MySQL UNION 操作符用于连接两个以上的 SELECT 语句的结果组合到一个结果集合中。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> expression1, expression2, ... expression_n //  要检索的列</span><br><span class="line"><span class="keyword">FROM</span> tables1</span><br><span class="line">[<span class="keyword">WHERE</span> conditions]</span><br><span class="line"><span class="keyword">UNION</span> [<span class="keyword">ALL</span> | <span class="keyword">DISTINCT</span>]  //默认是<span class="keyword">DISTINCT</span>删除重复数据，</span><br><span class="line"><span class="keyword">SELECT</span> expression1, expression2, ... expression_n</span><br><span class="line"><span class="keyword">FROM</span> tables2</span><br><span class="line">[<span class="keyword">WHERE</span> conditions];</span><br></pre></td></tr></table></figure>
<p><strong>排序</strong></p>
<p>&emsp;&emsp;如果需要对读取的数据进行排序，可以使用 MySQL 的 ORDER BY 子句来设定你想按哪个字段哪种方式来进行排序，再返回搜索结果。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> field1, field2,...fieldN table_name1, table_name2...</span><br><span class="line">[<span class="keyword">WHERE</span> conditions]</span><br><span class="line">//<span class="keyword">ASC</span> 或 <span class="keyword">DESC</span> 关键字来设置查询结果是按升序或降序排列。 默认情况下，它是按升序排列。</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> field1, [field2...] [<span class="keyword">ASC</span> [<span class="keyword">DESC</span>]]</span><br></pre></td></tr></table></figure>
<p><strong>分组与计数</strong></p>
<p>&emsp;&emsp;GROUP BY 语句根据一个或多个列对结果集进行分组。在分组的列上我们可以使用 COUNT, SUM, AVG,等函数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name, <span class="keyword">function</span>(column_name) //方法可以是计数<span class="keyword">count</span>，求和<span class="keyword">sum</span>，均值<span class="keyword">avg</span></span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line">[<span class="keyword">WHERE</span> column_name <span class="keyword">operator</span> <span class="keyword">value</span>]</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column_name [<span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>];    //WITH ROLLUP可以对总数进行相同方法统计</span><br><span class="line">//总数的统计列名为NULL，可以通过coalesce(name, '总数')这种方法来去除NULL</span><br></pre></td></tr></table></figure>
<p><strong>表间连接</strong></p>
<p>&emsp;&emsp;使用 MySQL 的 JOIN 可在两个或多个表中查询数据。JOIN 按照功能大致分为如下三类：</p>
<blockquote>
<p> INNER JOIN（内连接,或等值连接）：获取两个表中字段匹配关系的记录。<br> LEFT JOIN（左连接）：获取左表所有记录，即使右表没有对应匹配的记录。<br> RIGHT JOIN（右连接）： 与 LEFT JOIN 相反，用于获取右表所有记录，即使左表没有对应匹配的记录。</p>
</blockquote>
<p><img src="/images/programme/database/JOIN.jpg" alt="JOIN类型"></p>
<p>&emsp;&emsp;INNER JOIN示例</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT <span class="keyword">a</span>.runoob_id, <span class="keyword">a</span>.runoob_author, b.runoob_count <span class="comment"> //设置列</span></span><br><span class="line">FROM runoob_tbl <span class="keyword">a</span> INNER JOIN tcount_tbl b <span class="comment"> //两者取交集</span></span><br><span class="line">ON <span class="keyword">a</span>.runoob_author = b.runoob_author; <span class="comment"> //交集部分条件</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;上述语句中，INNER可以省略，只写JOIN。上面的语句和下面是等效的：</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.runoob_id, a.runoob_author, b.runoob_count </span><br><span class="line"><span class="keyword">FROM</span> runoob_tbl a, tcount_tbl b </span><br><span class="line"><span class="keyword">WHERE</span> a.runoob_author = b.runoob_author;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;LEFT JOIN示例</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.runoob_id, a.runoob_author, b.runoob_count </span><br><span class="line"><span class="keyword">FROM</span> runoob_tbl a <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> tcount_tbl b  </span><br><span class="line">//a中的全都会显示，b中的匹配上的显示，没匹配的显示<span class="literal">NULL</span></span><br><span class="line"><span class="keyword">ON</span> a.runoob_author = b.runoob_author;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;RIGHT JOIN示例</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.runoob_id, a.runoob_author, b.runoob_count </span><br><span class="line"><span class="keyword">FROM</span> runoob_tbl a <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> tcount_tbl b  </span><br><span class="line">//b中的全都会显示，a中的匹配上的显示，没匹配的显示<span class="literal">NULL</span></span><br><span class="line"><span class="keyword">ON</span> a.runoob_author = b.runoob_author;</span><br></pre></td></tr></table></figure>
<h2 id="特殊处理"><a href="#特殊处理" class="headerlink" title="特殊处理"></a>特殊处理</h2><p><strong>NULL 值处理</strong></p>
<p>&emsp;&emsp;MySQL 使用 SQL SELECT 命令及 WHERE 子句来读取数据表中的数据,但是当提供的查询条件字段为 NULL 时，该命令可能就无法正常工作。<br>因为NULL 的条件比较运算是比较特殊的。你不能使用 = NULL 或 != NULL 在列中查找 NULL 值 。在 MySQL 中，NULL 值与任何其它值的比较（即使是 NULL）永远返回 false，即 NULL = NULL 返回false 。<br>&emsp;&emsp;为了处理这种情况，MySQL提供了三种运算符:</p>
<blockquote>
<p> IS NULL: 当列的值是 NULL,此运算符返回 true。<br> IS NOT NULL: 当列的值不为 NULL, 运算符返回 true。<br> &lt;=&gt;: 比较操作符（不同于=运算符），当比较的的两个值为 NULL 时返回 true</p>
</blockquote>
<p><strong>正则表达式</strong></p>
<p>&emsp;&emsp;MySQL可以通过 LIKE …% 来进行模糊匹配。同样，也支持其他正则表达式的匹配， MySQL中使用 REGEXP 操作符来进行正则表达式匹配。</p>
<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>&emsp;&emsp;MySQL 事务主要用于处理操作量大，复杂度高的数据。比如说，在人员管理系统中，你删除一个人员，你即需要删除人员的基本资料，也要删除和该人员相关的信息，如信箱，文章等等，这样，这些数据库操作语句就构成一个事务！</p>
<blockquote>
<p> 在 MySQL 中只有使用了 Innodb 数据库引擎的数据库或表才支持事务<br> 事务处理可以用来维护数据库的完整性，保证成批的 SQL 语句要么全部执行，要么全部不执行<br> 事务用来管理 insert,update,delete 语句</p>
</blockquote>
<p>&emsp;&emsp;一般来说，事务是必须满足4个条件（ACID）：原子性（Atomicity，或称不可分割性）、一致性（Consistency）、隔离性（Isolation，又称独立性）、持久性（Durability）。</p>
<blockquote>
<p> 原子性：一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。<br> 一致性：在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。<br> 隔离性：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。<br> 持久性：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。</p>
</blockquote>
<p>&emsp;&emsp;在 MySQL 命令行的默认设置下，事务都是自动提交的，即执行 SQL 语句后就会马上执行 COMMIT 操作。因此要显式地开启一个事务务须使用命令 BEGIN 或 START TRANSACTION，或者执行命令 SET AUTOCOMMIT=0，用来禁止使用当前会话的自动提交。</p>
<p><strong>事务控制语句</strong></p>
<p>BEGIN或START TRANSACTION；显式地开启一个事务；<br>COMMIT；也可以使用COMMIT WORK，不过二者是等价的。COMMIT会提交事务，并使已对数据库进行的所有修改成为永久性的；<br>ROLLBACK；有可以使用ROLLBACK WORK，不过二者是等价的。回滚会结束用户的事务，并撤销正在进行的所有未提交的修改；<br>SAVEPOINT identifier；SAVEPOINT允许在事务中创建一个保存点，一个事务中可以有多个SAVEPOINT；<br>RELEASE SAVEPOINT identifier；删除一个事务的保存点，当没有指定的保存点时，执行该语句会抛出一个异常；<br>ROLLBACK TO identifier；把事务回滚到标记点；<br>SET TRANSACTION；用来设置事务的隔离级别。InnoDB存储引擎提供事务的隔离级别有READ UNCOMMITTED、READ COMMITTED、REPEATABLE READ和SERIALIZABLE。</p>
<p><strong>处理方法</strong></p>
<p>&emsp;&emsp;事务处理主要有两种方法:</p>
<p>1、用 BEGIN, ROLLBACK, COMMIT来实现</p>
<blockquote>
<p> BEGIN 开始一个事务<br> ROLLBACK 事务回滚<br> COMMIT 事务确认</p>
</blockquote>
<p>2、直接用 SET 来改变 MySQL 的自动提交模式</p>
<blockquote>
<p> SET AUTOCOMMIT=0 禁止自动提交<br> SET AUTOCOMMIT=1 开启自动提交</p>
</blockquote>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><p>&emsp;&emsp;MySQL索引的建立对于MySQL的高效运行是很重要的，索引可以大大提高MySQL的检索速度。<br>&emsp;&emsp;索引分单列索引和组合索引。单列索引，即一个索引只包含单个列，一个表可以有多个单列索引，但这不是组合索引。组合索引，即一个索引包含多个列。<br>&emsp;&emsp;过多的使用索引将会造成滥用。因此索引也会有它的缺点：虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件。建立索引会占用磁盘空间的索引文件。</p>
<p>ALTER TABLE tbl_name MODIFY column_list NOT NULL;<br>ALTER TABLE tbl_name ADD PRIMARY KEY (column_list)<br>//添加一个主键，这意味着索引值必须是唯一的，且不能为NULL。<br>ALTER TABLE tbl_name ADD UNIQUE index_name (column_list)<br>//添加唯一索引，创建索引的值必须是唯一的（除了NULL外，NULL可能会出现多次）。<br>ALTER TABLE tbl_name ADD INDEX index_name (column_list)<br>//添加普通索引，索引值可出现多次。<br>ALTER TABLE tbl_name ADD FULLTEXT index_name (column_list)<br>//指定了索引为 FULLTEXT ，用于全文索引。<br>ALTER TABLE testalter_tbl DROP PRIMARY KEY;<br>//删除主键时，只需指定PRIMARY KEY，但在删除索引时，你必须知道索引名。<br>SHOW INDEX FROM table_name; \G<br>//列出表中的相关的索引信息</p>
<h2 id="自增序列"><a href="#自增序列" class="headerlink" title="自增序列"></a>自增序列</h2><p>&emsp;&emsp;MySQL中最简单使用序列的方法就是使用 MySQL AUTO_INCREMENT 来定义列。</p>
<p>id INT UNSIGNED NOT NULL AUTO_INCREMENT， //设置自增序列<br>PRIMARY KEY (id),  //设置为主键</p>
<p><strong>重置序列</strong></p>
<p>&emsp;&emsp;如果你删除了数据表中的多条记录，并希望对剩下数据的AUTO_INCREMENT列进行重新排列，那么你可以通过删除自增的列，然后重新添加来实现。 不过该操作要非常小心，如果在删除的同时又有新记录添加，有可能会出现数据混乱。<br>ALTER TABLE insect DROP id;  //删除列<br>ALTER TABLE insect ADD id INT UNSIGNED NOT NULL AUTO_INCREMENT FIRST,<br>ADD PRIMARY KEY (id); //删除后重新生成一样属性的</p>
<p><strong>设置序列起始值</strong></p>
<p> ALTER TABLE t AUTO_INCREMENT = 100;</p>
<h2 id="重复数据处理"><a href="#重复数据处理" class="headerlink" title="重复数据处理"></a>重复数据处理</h2><p> &emsp;&emsp;有些 MySQL 数据表中可能存在重复的记录，有些情况我们允许重复数据的存在，但有时候我们也需要删除这些重复的数据。</p>
<p><strong>防止出现重复数据</strong></p>
<p> &emsp;&emsp;可以在MySQL数据表中设置指定的字段为 PRIMARY KEY（主键） 或者 UNIQUE（唯一） 索引来保证数据的唯一性。可以设置双主键模式来设置数据的唯一性，主键都不能为NULL。<br> PRIMARY KEY (last_name, first_name)<br>  UNIQUE (last_name, first_name)</p>
<p> &emsp;&emsp; 如果我们设置了唯一索引，那么在插入重复数据时，SQL语句将无法执行成功,并抛出错。此时，不能使用INSERT INTO，而是使用INSERT IGNORE INTO。<br>  &emsp;&emsp;INSERT IGNORE会忽略数据库中已经存在的数据，如果数据库没有数据，就插入新的数据，如果有数据的话就跳过这条数据，不返回错误，只以警告形式返回。这样就可以保留数据库中已经存在数据，达到在间隙中插入数据的目的。<br>  &emsp;&emsp;如果要替换，可以使用REPLACE INTO，如果存在PRIMARY KEY 或 UNIQUE 相同的记录，则先删除掉。再插入新记录。</p>
<p><strong>统计重复数据</strong></p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(*) <span class="keyword">as</span> repetitions, last_name, first_name  //确定哪一列可能出现重复</span><br><span class="line"><span class="keyword">FROM</span> person_tbl</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> last_name, first_name  //分组计数</span><br><span class="line"><span class="keyword">HAVING</span> repetitions &gt; <span class="number">1</span>;  //设置重复数大于1。</span><br></pre></td></tr></table></figure>
<p><strong>过滤重复数据</strong></p>
<p>&emsp;&emsp;如果需要读取不重复的数据可以在 SELECT 语句中使用 DISTINCT 关键字来过滤重复数据。<br>SELECT DISTINCT last_name, first_name FROM person_tbl;<br>可以使用 GROUP BY 来读取数据表中不重复的数据：<br>SELECT last_name, first_name FROM person_tbl GROUP BY (last_name, first_name);</p>
<p><strong>删除重复数据</strong></p>
<p>可以在数据表中添加 INDEX（索引） 和 PRIMAY KEY（主键）这种简单的方法来删除表中的重复记录。<br> ALTER IGNORE TABLE person_tbl ADD PRIMARY KEY (last_name, first_name);</p>
<h2 id="SQL-注入与防止"><a href="#SQL-注入与防止" class="headerlink" title="SQL 注入与防止"></a>SQL 注入与防止</h2><p>&emsp;&emsp;通过网页获取用户输入的数据并将其插入一个MySQL数据库，那么就有可能发生SQL注入安全的问题。所谓SQL注入，就是通过把SQL命令插入到Web表单递交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。<br>&emsp;&emsp;我们永远不要信任用户的输入，我们必须认定用户输入的数据都是不安全的，我们都需要对用户输入的数据进行过滤处理。</p>
<p>&emsp;&emsp;防止SQL注入，我们需要注意以下几个要点：</p>
<blockquote>
<p> 1.永远不要信任用户的输入。对用户的输入进行校验，可以通过正则表达式，或限制长度；对单引号和 双”-“进行转换等。<br> 2.永远不要使用动态拼装sql，可以使用参数化的sql或者直接使用存储过程进行数据查询存取。<br> 3.永远不要使用管理员权限的数据库连接，为每个应用使用单独的权限有限的数据库连接。<br> 4.不要把机密信息直接存放，加密或者hash掉密码和敏感的信息。<br> 5.应用的异常信息应该给出尽可能少的提示，最好使用自定义的错误信息对原始错误信息进行包装<br> 6.sql注入的检测方法一般采取辅助软件或网站平台来检测，软件一般采用sql注入检测工具jsky，网站平台就有亿思网站安全平台检测工具。MDCSOFT SCAN等。采用MDCSOFT-IPS可以有效的防御SQL注入，XSS攻击等。</p>
</blockquote>
<h2 id="导入与导出数据"><a href="#导入与导出数据" class="headerlink" title="导入与导出数据"></a>导入与导出数据</h2><p><strong>导出数据</strong></p>
<p>&emsp;&emsp;可以使用SELECT…INTO OUTFILE语句来简单的导出数据到文本文件上。<br>SELECT * FROM runoob_tbl INTO OUTFILE ‘/tmp/runoob.txt’;<br>&emsp;&emsp;还可以通过命令选项来设置数据输出的指定格式，以下实例为导出 CSV 格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> passwd <span class="keyword">INTO</span> <span class="keyword">OUTFILE</span> <span class="string">'/tmp/runoob.txt'</span></span><br><span class="line"> <span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">','</span> <span class="keyword">ENCLOSED</span> <span class="keyword">BY</span> <span class="string">'"'</span>  //以逗号隔开，以双引号包围</span><br><span class="line"> <span class="keyword">LINES</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\r\n'</span>;  //行结束为 \r\n</span><br></pre></td></tr></table></figure>
<p>SELECT…INTO OUTFILE ‘file_name’形式的SELECT可以把被选择的行写入一个文件中。该文件被创建到服务器主机上，因此您必须拥有FILE权限，才能使用此语法。<br>输出不能是一个已存在的文件。防止文件数据被篡改。<br>你需要有一个登陆服务器的账号来检索文件。否则 SELECT … INTO OUTFILE 不会起任何作用。<br>在UNIX中，该文件被创建后是可读的，权限由MySQL服务器所拥有。这意味着，虽然你就可以读取该文件，但可能无法将其删除。</p>
<p>&emsp;&emsp;mysqldump 是 mysql 用于转存储数据库的实用程序。它主要产生一个 SQL 脚本，其中包含从头重新创建数据库所必需的命令 CREATE TABLE INSERT 等。</p>
<p>导出SQL 格式的数据到指定文件<br>mysqldump -u root -p RUNOOB runoob_tbl &gt; dump.txt<br>导出整个数据库的数据，可以使用以下命令：<br>mysqldump -u root -p RUNOOB &gt; database_dump.txt<br>备份所有数据库，可以使用以下命令：<br>mysqldump -u root -p –all-databases &gt; database_dump.txt</p>
<p>将数据表及数据库拷贝至其他主机<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将数据备份至 dump.txt 文件中</span></span><br><span class="line">mysqldump -u root -p database_name table_name &gt; <span class="keyword">dump</span>.txt</span><br><span class="line"><span class="comment">// 将备份的数据库导入到MySQL服务器</span></span><br><span class="line">mysql -u root -p database_name &lt; <span class="keyword">dump</span>.txt</span><br><span class="line"><span class="comment">//可组合后直接导入</span></span><br><span class="line">mysqldump -u root -p database_name \</span><br><span class="line">| mysql -h other-host.com database_name</span><br></pre></td></tr></table></figure></p>
<p>将远程服务器的数据拷贝到本地<br>mysqldump -h other-host.com -P port -u root -p database_name &gt; dump.txt</p>
<p><strong>导入数据</strong></p>
<p>1、mysql 命令导入</p>
<p>mysql -u用户名    -p密码    &lt;  要导入的数据库数据<br>例：mysql -uroot -p123456 &lt; runoob.sql</p>
<p>2、source 命令导入<br>source 命令导入数据库需要先登录到数库终端</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> abc;      // 创建数据库</span><br><span class="line"><span class="keyword">use</span> abc;                  // 使用已创建的数据库 </span><br><span class="line"><span class="keyword">set</span> <span class="keyword">names</span> utf8;           // 设置编码</span><br><span class="line">source /home/abc/abc.sql  // 导入备份数据库</span><br></pre></td></tr></table></figure>
<p>3、使用 LOAD DATA 导入数据</p>
<p>&emsp;&emsp;LOAD DATA INFILE是SELECT … INTO OUTFILE的逆操作。为了将一个数据库的数据写入一个文件，使用SELECT … INTO OUTFILE，为了将文件读回数据库，使用LOAD DATA INFILE。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LOAD</span> <span class="keyword">DATA</span> <span class="keyword">LOCAL</span> <span class="keyword">INFILE</span> <span class="string">'dump.txt'</span> <span class="keyword">INTO</span> <span class="keyword">TABLE</span> mytbl</span><br><span class="line"><span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">','</span></span><br><span class="line"><span class="keyword">LINES</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\r\n'</span>;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;如果指定LOCAL关键词，则表明从客户主机上按路径读取文件。如果没有指定，则文件在服务器上按路径读取文件。<br>&emsp;&emsp;可以明确地在LOAD DATA语句中指出列值的分隔符和行尾标记，但是默认标记是定位符和换行符。两个命令的 FIELDS 和 LINES 子句的语法是一样的。两个子句都是可选的，但是如果两个同时被指定，FIELDS 子句必须出现在 LINES 子句之前。</p>
<p>&emsp;&emsp;LOAD DATA 默认情况下是按照数据文件中列的顺序插入数据的，如果数据文件中的列与插入表中的列不一致，则需要指定列的顺序。如，在数据文件中的列顺序是 a,b,c，但在插入表的列顺序为b,c,a，则数据导入语法如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">LOAD</span> <span class="keyword">DATA</span> <span class="keyword">LOCAL</span> <span class="keyword">INFILE</span> <span class="string">'dump.txt'</span> </span><br><span class="line"><span class="keyword">INTO</span> <span class="keyword">TABLE</span> mytbl (b, c, a);</span><br></pre></td></tr></table></figure>
<p>4、使用 mysqlimport 导入数据</p>
<p>//从文件 dump.txt 中将数据导入到 mytbl 数据表中<br>mysqlimport -u root -p –local database_name dump.txt</p>
<p>//mysqlimport命令可以指定选项来设置指定格式<br>mysqlimport -u root -p –local –fields-terminated-by=”,” \<br>   –lines-terminated-by=”\r\n”  database_name dump.txt<br>//mysqlimport 语句中使用 –columns 选项来设置列的顺序<br>mysqlimport -u root -p –local –columns=b,c,a \<br>    database_name dump.txt</p>

      
    </div>

    <div>
      
        

      
    </div>
  
        <div class="post-tags">
          
            <a href="/tags/mysql/" rel="tag"><i class="fa fa-tag"></i> mysql</a>
          
            <a href="/tags/Navicat/" rel="tag"><i class="fa fa-tag"></i> Navicat</a>
          
        </div>
      


    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>🐶 您的支持将鼓励我继续创作 🐶</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赞赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/weixin.jpg" alt="Pan Xiang WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/images/zhifubao.jpg" alt="Pan Xiang Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>


    <footer class="post-footer">
        
     <div>
      
      <ul class="post-copyright">


        <li class="post-copyright-link">
          <strong>本文标题：</strong>
          <a href="https://panxiang315.github.io/programme/Database/database-learning/" title="数据库学习笔记">数据库学习笔记</a>
        </li>

        <li class="post-copyright-link">
          <strong>本文链接：</strong>
          <a href="https://panxiang315.github.io/programme/Database/database-learning/" title="数据库学习笔记">https://panxiang315.github.io/programme/Database/database-learning/</a>
        </li>

        <li class="post-copyright-date">
            <strong>发布时间：</strong>2018年6月20日 - 09时06分
        </li>


      </ul>
    
  </div>
      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/programme/Node-js/admin-theme/" rel="next" title="Vali Admin使用教程">
                <i class="fa fa-chevron-left"></i> Vali Admin使用教程
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/cognitive/reprint/product/" rel="prev" title="产品能力是每个人的底层能力">
                产品能力是每个人的底层能力 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    

  </div>



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Pan Xiang" />
          <p class="site-author-name" itemprop="name">Pan Xiang</p>
          <p class="site-description motion-element" itemprop="description">Learning, on the way</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">79</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">29</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">90</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/panxiang315" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/panxiangBupt" target="_blank" title="weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://greychess.cn" title="好友博客" target="_blank">好友博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.zhangxinxu.com/wordpress/" title="张鑫旭大佬" target="_blank">张鑫旭大佬</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.w3cplus.com/" title="大漠大佬" target="_blank">大漠大佬</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.php.cn/" title="前端学习" target="_blank">前端学习</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL"><span class="nav-number">1.</span> <span class="nav-text">MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基础语句"><span class="nav-number">1.1.</span> <span class="nav-text">基础语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据类型"><span class="nav-number">1.2.</span> <span class="nav-text">数据类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据表操作"><span class="nav-number">1.3.</span> <span class="nav-text">数据表操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据操作"><span class="nav-number">1.4.</span> <span class="nav-text">数据操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据处理"><span class="nav-number">1.5.</span> <span class="nav-text">数据处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#特殊处理"><span class="nav-number">1.6.</span> <span class="nav-text">特殊处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事务"><span class="nav-number">1.7.</span> <span class="nav-text">事务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#索引"><span class="nav-number">1.8.</span> <span class="nav-text">索引</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自增序列"><span class="nav-number">1.9.</span> <span class="nav-text">自增序列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重复数据处理"><span class="nav-number">1.10.</span> <span class="nav-text">重复数据处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-注入与防止"><span class="nav-number">1.11.</span> <span class="nav-text">SQL 注入与防止</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#导入与导出数据"><span class="nav-number">1.12.</span> <span class="nav-text">导入与导出数据</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2018 - 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fas fa-star"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Pan Xiang</span>
</div>






        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  

  
      <!-- UY BEGIN -->
      <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid="></script>
      <!-- UY END -->
  



  


  
  

  
  


  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

	<!-- 页面点击小红心 -->
	<!-- <script type="text/javascript" src="/js/src/love.js"></script> --><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
